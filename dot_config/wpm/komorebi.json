{
  "$schema": "https://raw.githubusercontent.com/LGUG2Z/wpm/refs/heads/master/schema.unit.json",
  "Unit": {
    "Name": "komorebi",
    "Description": "Tiling window management for Windows",
    "Requires": ["kanata"]
  },
  "Resources": {
    "CONFIGURATION_FILE": "C:\\Users\\barbo\\.config\\komorebi\\komorebi.json"
  },
  "Service": {
    "Kind": "Simple",
    "ExecStartPre": [
      {
        "Executable": "komorebic.exe",
        "Arguments": ["fetch-asc"]
      }
    ],
    "ExecStart": {
      "Executable": "komorebi.exe",
      "Arguments": ["--config", "{{ Resources.CONFIGURATION_FILE }}"],
      "Environment": [["KOMOREBI_CONFIG_HOME", "$USERPROFILE/.config/komorebi"]]
    },
    "ExecStop": [
      {
        "Executable": "komorebic.exe",
        "Arguments": ["stop"]
      }
    ],
    "ExecStopPost": [
      {
        "Executable": "komorebic.exe",
        "Arguments": ["restore-windows"]
      }
    ],
    "Healthcheck": {
      "Command": {
        "Executable": "komorebic.exe",
        "Arguments": ["state"],
        "DelaySec": 1
      }
    },
    "Restart": "Never"
  }
}
